<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">		
        <title>Omnitracs Driver Retention Model</title>
		
		<!-- Favicon -->
        <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static',filename='assets/img/favicon.png') }}">
		
		<!-- Bootstrap CSS -->
        <link rel="stylesheet" href="{{ url_for('static',filename='assets/css/bootstrap.min.css') }}">
		
		<!-- Fontawesome CSS -->
        <link rel="stylesheet" href="{{ url_for('static',filename='assets/css/font-awesome.min.css') }}">
		
		<!-- Lineawesome CSS -->
        <link rel="stylesheet" href="{{ url_for('static',filename='assets/css/line-awesome.min.css') }}">
		
		<!-- Main CSS -->
        <link rel="stylesheet" href="{{ url_for('static',filename='assets/css/style.css') }}">
		
		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			<script src="assets/js/html5shiv.min.js"></script>
			<script src="assets/js/respond.min.js"></script>
		<![endif]-->
    </head>
    <body>
		<!-- Main Wrapper -->
        <div class="main-wrapper">
			<!-- Loader -->
			<div id="loader-wrapper">
				<div id="loader">
					<div class="loader-ellips">
					  <span class="loader-ellips__dot"></span>
					  <span class="loader-ellips__dot"></span>
					  <span class="loader-ellips__dot"></span>
					  <span class="loader-ellips__dot"></span>
					</div>
				</div>
			</div>
			<!-- /Loader -->
		
			<!-- Header -->
            <div class="header">
			
				<!-- Logo -->
                <div class="header-left">
                    <a href="/" class="logo">
						<img src="{{ url_for('static',filename='assets/img/logo.png') }}" width="40" height="40" alt="">
					</a>
                </div>
				<!-- /Logo -->
				
				<a id="toggle_btn" href="javascript:void(0);">
					<span class="bar-icon">
						<span></span>
						<span></span>
						<span></span>
					</span>
				</a>
				
				<!-- Header Title -->
                <div class="page-title-box">
					<h3>Driver Retention</h3>
                </div>
				<!-- /Header Title -->
				
				<a id="mobile_btn" class="mobile_btn" href="#sidebar"><i class="fa fa-bars"></i></a>
				
				<!-- Header Menu -->
				<ul class="nav user-menu">

				
				
					<!-- Notifications -->
					<li class="nav-item dropdown">
						<a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
							<i class="fa fa-bell-o"></i> <span class="badge badge-pill">2</span>
						</a>
						<div class="dropdown-menu notifications">
							<div class="topnav-dropdown-header">
								<span class="notification-title">Notifications</span>
								<a href="javascript:void(0)" class="clear-noti"> Clear All </a>
							</div>
							<div class="noti-content">
								<ul class="notification-list">
									<li class="notification-message">
										<a href="activities.html">
											<div class="media">
												<span class="avatar">
													<img alt="" src="{{ url_for('static',filename='assets/img/profiles/avatar-02.jpg') }}">
												</span>
												<div class="media-body">
													<p class="noti-details"><span class="noti-title">Richard Miles</span> has been  <span class="noti-title">off-duty for more than a week </span></p>
													<p class="noti-time"><span class="notification-time">6 hours ago</span></p>
												</div>
											</div>
										</a>
									</li>
									<li class="notification-message">
										<a href="activities.html">
											<div class="media">
												<span class="avatar">
													<img alt="" src="{{ url_for('static',filename='assets/img/profiles/avatar-03.jpg') }}">
												</span>
												<div class="media-body">
													<p class="noti-details"><span class="noti-title">Ricardo Ramirez</span> truck <span class="noti-title">in shop</span></p>
													<p class="noti-time"><span class="notification-time">11 hours ago</span></p>
												</div>
											</div>
										</a>
									</li>
								</ul>
							</div>
							<div class="topnav-dropdown-footer">
								<a href="activities.html">View all Notifications</a>
							</div>
						</div>
					</li>
					<!-- /Notifications -->
	

					<li class="nav-item dropdown has-arrow main-drop">
						<a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
							<span class="user-img"><img src="{{ url_for('static',filename='assets/img/profiles/avatar-21.jpg') }}" alt="">
							<span class="status online"></span></span>
							<span>Admin</span>
						</a>
						<div class="dropdown-menu">
							<a class="dropdown-item" href="profile.html">My Profile</a>
							<a class="dropdown-item" href="login.html">Logout</a>
						</div>
					</li>
				</ul>
				<!-- /Header Menu -->
				
				<!-- Mobile Menu -->
				<div class="dropdown mobile-user-menu">
					<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-ellipsis-v"></i></a>
					<div class="dropdown-menu dropdown-menu-right">
						<a class="dropdown-item" href="profile.html">My Profile</a>
						<a class="dropdown-item" href="login.html">Logout</a>
					</div>
				</div>
				<!-- /Mobile Menu -->
				
            </div>
			<!-- /Header -->
			
			<!-- Sidebar -->
            <div class="sidebar" id="sidebar">
                <div class="sidebar-inner slimscroll">
					<div id="sidebar-menu" class="sidebar-menu">
						<ul>
							<li class="menu-title"> 
								<span>Main</span>
							</li>
							<li class="submenu">
								<a href="#"><i class="la la-dashboard"></i> <span> Dashboard</span> <span class="menu-arrow"></span></a>
								<ul style="display: none;">
									<li><a href="/dashboard">Employee Dashboard</a></li>
								</ul>
							</li>

							<li class="menu-title"> 
								<span>Employees</span>
							</li>
							<li class="submenu">
								<a href="#" class="noti-dot"><i class="la la-user"></i> <span> Employees</span> <span class="menu-arrow"></span></a>
								<ul style="display: none;">
									<li><a href="/employees">All Employees</a></li>
									<li><a href="quits.html">Quits</a></li>
								</ul>
							</li>
							<li class="menu-title"> 

						</ul>
					</div>
                </div>
            </div>
			<!-- /Sidebar -->
			
			<!-- Page Wrapper -->
            <div class="page-wrapper">
			
				<!-- Page Content -->
                <div class="content container-fluid">
					<div class="row">
						<div class="col-md-12">
							<div class="welcome-box">
								<div class="welcome-img">
									<img alt="" src="{{ url_for('static',filename='assets/img/profiles/avatar-02.jpg') }}">
								</div>
								<div class="welcome-det">
									<h3>Welcome, Admin</h3>
									<p>Monday, 21 June 2021</p>
								</div>
							</div>
						</div>
					</div>
					
					<div class="row">
						<div class="col-lg-8 col-md-8">
							<section class="dash-section">
								<h1 class="dash-sec-title">Today</h1>
								<div class="dash-sec-content" id="less_week">
									
								</div>
							</section>

							<section class="dash-section">
								<h1 class="dash-sec-title">Next seven days</h1>
								<div class="dash-sec-content" id="more_week">
									
		
								</div>
							</section>
						</div>

						<div class="col-lg-4 col-md-4">
							<div class="dash-sidebar">
								<section>
									<h5 class="dash-title">Remediation Calls </h5>
									<div class="card">
										<div class="card-body">
											<div class="time-list">
												<div class="dash-stats-list">
													<h4>10</h4>
													<p>Calls made</p>
												</div>
												<div class="dash-stats-list">
													<h4>3</h4>
													<p>Remaining</p>
												</div>
											</div>
											<div class="request-btn">
												<div class="dash-stats-list">
													<h4>13</h4>
													<p>Total Calls</p>
												</div>
											</div>
										</div>
									</div>
								</section>
								<section>
									<h5 class="dash-title">Follow ups</h5>
									<div class="card">
										<div class="card-body">
											<div class="time-list">
												<div class="dash-stats-list">
													<h4>5</h4>
													<p>Calls Made</p>
												</div>
												<div class="dash-stats-list">
													<h4>4</h4>
													<p>Remaining</p>
												</div>
											</div>
										</div>
									</div>
								</section>
								<section>
									<h5 class="dash-title">Upcoming Holiday</h5>
									<div class="card">
										<div class="card-body text-center">
											<h4 class="holiday-title mb-0">Mon 6 September 2021 - Labor Day</h4>
										</div>
									</div>
								</section>
							</div>
						</div>
					</div>

				</div>
				<!-- /Page Content -->

            </div>
			<!-- /Page Wrapper -->
			
        </div>
		<!-- /Main Wrapper -->
		
		<!-- jQuery -->
        <script src="{{ url_for('static',filename='assets/js/jquery-3.5.1.min.js') }}"></script>
		
		<!-- Bootstrap Core JS -->
        <script src="{{ url_for('static',filename='assets/js/popper.min.js') }}"></script>
        <script src="{{ url_for('static',filename='assets/js/bootstrap.min.js') }}"></script>
		
		<!-- Slimscroll JS -->
		<script src="{{ url_for('static',filename='assets/js/jquery.slimscroll.min.js') }}"></script>
		
		<!-- Custom JS -->
		<script src="{{ url_for('static',filename='assets/js/app.js') }}"></script>
		<script>

const _MS_PER_DAY = 1000 * 60 * 60 * 24;

// a and b are javascript Date objects
function dateDiffInDays(a, b) {
  // Discard the time and time-zone information.
  const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());
  const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate());

  return Math.floor((utc2 - utc1) / _MS_PER_DAY);
}

// test it
			var obj = {{follow_up_data|safe}}
			console.log(obj)
			var currentDate = new Date();
			Object.keys(obj[" Time"]).forEach(key=>{
				var myDate = obj[" Time"][key];
				myDate = myDate.split("/");
				var newDate = new Date( myDate[2], myDate[1] - 1, myDate[0]);
				const diffDays = dateDiffInDays(newDate, currentDate);
				console.log(diffDays)
				if(diffDays <= 0 && diffDays <-7){
					$("#more_week").append(`
					<div class="dash-info-list">
										<a href="#" class="dash-card ">
											<div class="dash-card-container">
												<div class="dash-card-icon">
													<i class="fa fa-suitcase"></i>
												</div>
												<div class="dash-card-content black-color d-block">
													<h3>${obj[" Name"][key]}</h3>
													<p>${obj[" Message"][key]}</p>
												</div>
												<div class="dash-card-avatars">
													<div class="e-avatar"><img src="{{ url_for('static',filename='assets/img/profiles/avatar-09.jpg') }}" alt=""></div>
												</div>
											</div>
										</a>
									</div>

					`)
				}
				else if(diffDays>=-7){
                   $("#less_week").append(`
				   <div class="dash-info-list">
										<div class="dash-card">
											<div class="dash-card-container">
												<div class="dash-card-icon">
													<i class="fa fa-suitcase"></i>
												</div>
												<div class="dash-card-content d-block">
													<h3>${obj[" Name"][key]}</h3>
													<p>${obj[" Message"][key]}</p>
												</div>
												<div class="dash-card-avatars">
													<a href="#" class="e-avatar"><img src="{{ url_for('static',filename='assets/img/profiles/avatar-05.jpg') }}" alt=""></a>
												</div>
											</div>
										</div>
									</div>  
				   `)
				}
			

        });
		</script>
    </body>
</html>